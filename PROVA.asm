;****************************** Programa modelo ******************************
;*******                       Nome do programa                    ***********
;*****************************************************************************

;*********************  Definição do processador *****************************

	#include p16F877.inc 
	__config _HS_OSC & _WDT_OFF & _LVP_OFF & _PWRTE_ON 

;************************** Memória de programa ******************************
 ORG     0 

RESET 
 nop             
 goto   START 
;***************************** Interrupção **********************************
 ORG 4 
;*************************** Inicio do programa ******************************

START 

 bsf     STATUS,RP0  ;vai para o Bank 1
;*************************** Declaração de variáveis ******************************   
 DELAY 	 EQU 0x20
 VEZES 	 EQU 0x21
 D1		EQU 0x22
 D2 	EQU 0x23
 D3 	EQU 0x24
 D4		EQU 0x25
 AUX	EQU 0x26
 DELAY2 EQU 0x27
 VEZES2 EQU 0x28

;*************************** Configurações ******************************
 movlw   b'00000000' ; Seta PORTA como saída
 movwf   TRISA       
 movlw   b'00000000' ; Seta PORTD como saída
 movwf   TRISD     
 MOVLW	b'00001111'
 movwf	TRISB  
 MOVLW	b'00000000'
 movwf	TRISE
 bcf   STATUS,RP0    ;vai para o Bank 0
;*************************** Programa principal ******************************
 
;inicialização
;configuração

	MOVLW B'11111111'
 	MOVWF PORTE

	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF PORTD

	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF D1

	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF D2

	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF D3
	
	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF D4
    

INICIAL


CALL COMPLEMENTO_O
CALL COMPLEMENTO_L
CALL COMPLEMENTO_A
;CALL COMPLEMENTO_OLA


GOTO INICIO


GOTO INICIAL

INICIO


	MOVLW B'11101111'; RB4 COM 0, RESTO TUDO 1
	MOVWF PORTB
	BTFSS PORTB, 0; S1 -> BOTÃO 0
	CALL ACENDE_A
	BTFSS PORTB, 1; S2 -> BOTÃO 1
	CALL ACENDE_B
	BTFSS PORTB, 2; S3 -> BOTÃO 2
	CALL ACENDE_C
	BTFSS PORTB, 3; S4 -> BOTÃO 3
	CALL ACENDE_D

	MOVLW B'11011111'; RB5 COM 0, RESTO TUDO 1
	MOVWF PORTB
	BTFSS PORTB, 0; S5 -> BOTÃO 4
	CALL ACENDE_E
	BTFSS PORTB, 1; S6 -> BOTÃO 5
	CALL ACENDE_F
	BTFSS PORTB, 2; S5 -> BOTÃO 4
	CALL ACENDE_G
	BTFSS PORTB, 3; S6 -> BOTÃO 5
	CALL ACENDE_H

	MOVLW B'10111111'; RB5 COM 0, RESTO TUDO 1
	MOVWF PORTB
	BTFSS PORTB, 0; S5 -> BOTÃO 4
	CALL ACENDE_I
	BTFSS PORTB, 1; S6 -> BOTÃO 5
	CALL ACENDE_J
	BTFSS PORTB, 2; S5 -> BOTÃO 4
	CALL ACENDE_L
	BTFSS PORTB, 3; S6 -> BOTÃO 5
	CALL ACENDE_N

	CALL DISPLAY1
	CALL DISPLAY2
	CALL DISPLAY3
	CALL DISPLAY4

	MOVLW B'01111111'; RB5 COM 0, RESTO TUDO 1
	MOVWF PORTB
	BTFSS PORTB, 0; S5 -> BOTÃO 4
	CALL ACENDE_O
	BTFSS PORTB, 1; S6 -> BOTÃO 5
	CALL ACENDE_P
	BTFSS PORTB, 2; S5 -> BOTÃO 4
	CALL ACENDE_R
	BTFSS PORTB, 3; S5 -> BOTÃO 4
	CALL ZERA
	

  goto INICIO   
   
 
	APITA

	MOVLW B'00000000'
 	MOVWF PORTE
	CALL PERDE_TEMPO
	MOVLW B'11111111'
 	MOVWF PORTE

RETURN

	MOVER

	MOVF D3,W
	MOVWF D4
	MOVF D2,W
	MOVWF D3
	MOVF D1,W
	MOVWF D2
	MOVF AUX,W
	MOVWF D1


return


	ACENDE_A
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW 0x77
	MOVWF AUX
	CALL MOVER
	CALL APITA
	

return

	ACENDE_B
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW 0x7C
	MOVWF AUX
	CALL MOVER
	CALL APITA
	

return

	ACENDE_C
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW 0x39
	MOVWF AUX
	CALL MOVER
	CALL APITA

return

	ACENDE_D
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW 0x5E
	MOVWF AUX
	CALL MOVER
	CALL APITA

return 

	ACENDE_E
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW 0x79
	MOVWF AUX
	CALL MOVER
	CALL APITA

return

	ACENDE_F
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW 0x71
	MOVWF AUX
	CALL MOVER
	CALL APITA

return 

	ACENDE_G
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW B'01101111'
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN

ACENDE_H
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW B'01110110'
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN

ACENDE_I
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW B'00000110'
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN

ACENDE_J
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW B'00011110'
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN


ACENDE_L
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW B'00111000'
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN


ACENDE_N
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW B'01010100'
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN


ACENDE_O
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW 0X3F
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN

ACENDE_P
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW B'01110011'
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN

ACENDE_R
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	MOVLW B'01010000'
	MOVWF AUX
	CALL MOVER
	CALL APITA

RETURN


	COMPLEMENTO_O

	MOVLW B'00100000'
	MOVWF PORTA
	MOVLW 0X3F
	MOVWF PORTD
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
return

	COMPLEMENTO_L

	MOVLW B'00010000'
	MOVWF PORTA
	MOVLW B'00111000'
	MOVWF PORTD
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
RETURN


	COMPLEMENTO_A
	MOVLW B'00001000'
	MOVWF PORTA
	MOVLW 0x77
	MOVWF PORTD
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
RETURN

	

	COMPLEMENTO_OLA

	MOVLW B'00111000'
	MOVWF PORTA

	MOVLW 0X3F
	MOVWF PORTD
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO

	MOVLW B'00111000'
	MOVWF PORTD
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO

	MOVLW 0x77
	MOVWF PORTD
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO
	CALL PERDE_TEMPO



RETURN


	DISPLAY1
	CALL PERDE_TEMPO2
	MOVLW b'00000100'
	MOVWF PORTA
	MOVF D1, W
	MOVWF PORTD


return

	DISPLAY2
	CALL PERDE_TEMPO2
	MOVLW b'00001000'
	MOVWF PORTA
	MOVF D2, W
	MOVWF PORTD

return

	DISPLAY3
	CALL PERDE_TEMPO2
	MOVLW b'00010000'
	MOVWF PORTA
	MOVF D3, W
	MOVWF PORTD

return

	DISPLAY4
	CALL PERDE_TEMPO2
	MOVLW b'00100000'
	MOVWF PORTA
	MOVF D4, W
	MOVWF PORTD

return

silencio
	movlw b'00000001'
	movwf PORTE
return

	ZERA

	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF D1
	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF D2
	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF D3
	MOVLW B'00000000'; RB4 COM 0, RESTO TUDO 1
	MOVWF D4
	
return

	PERDE_TEMPO
 	MOVLW d'255'
 	MOVWF VEZES
	LOOP_VEZES
 	MOVLW d'255'
 	MOVWF DELAY
 	CALL DELAY_US
	DECFSZ VEZES,1
	GOTO LOOP_VEZES
RETURN 

	DELAY_US
	NOP
 	NOP
	DECFSZ DELAY,1
	GOTO DELAY_US
RETURN

	PERDE_TEMPO2
 	MOVLW d'20'
 	MOVWF VEZES2
	LOOP_VEZES2
 	MOVLW d'80'
 	MOVWF DELAY2
 	CALL DELAY_US2
	DECFSZ VEZES2,1
	GOTO LOOP_VEZES2
RETURN 

	DELAY_US2
	NOP
 	NOP
	DECFSZ DELAY2,1
	GOTO DELAY_US2
RETURN


 end
